

# Иерархия:

* В директории `./data` собраны все данные;
* В директории `./experiments` - ноутбуки с экспериментами.


# Документация

Документация представлена в документе:

`design_doc.md`


# Работа


## 1. Сбор данных.

Словари со списком названий коллекций и образцов (названия на русском -> код, название на английском -> код, и наоборот) представлены в `experiments/utils.py`

Данные, используемые в данный момент, скачанные с сайтов UKB и ФиннГен (все ссылки представлены [тут](https://docs.google.com/document/d/1EuJOx2iu7zVLVzkMqsKDPozVCgrZC16H6VQHH6hOCOs/edit?usp=sharing)):
* Финнген (имена, описания, коды): `data/in_data/fg_R9_manifest.tsv`
* Официальный файл с описаниями признаков ЮКБ: `data/in_data/panukb_phenotype_manifest.csv`
* Файл маппинга данных Финнгена и ЮКБ: `data/in_data/fg_R9_ukb_mapping.tsv`

Остальные файлы могут быть использованы в дальнейшем:
* Описание колонок UKB-файла: `panukb_readme.csv`
* Файлы исследований по данным UKB биобанка от Neal lab: `ukb_manifest.csv`, `ukb_readme.csv`, `ukb_description_lookup.csv` (данные, их описание и категории признаков соответственно)

## 2. Подготовка данных

В ноутбуке `experiments/1_perfect_mapping.ipynb` происходит соединение всех данных, в результате получаются два ключевых файла:

* `data/merged_bio.tsv` - смерженные данные, колонки соответствуют кодам, описанию и названиям признаков из исследований.
* `data/codes.tsv` - текущие названия из биобанков (коллекций и признаков) на русском, английском языках, а также их внутренний код.


## 3. ML Часть


Основная часть находится в ноутбуке `experiments/2.0_ML_start.ipynb`. На данный момент опробовано две стратегии:
* bioBERT без удаления стоп-слов
* bioBERT с удалением стоп-слов

В ноутбуке `2.1_merging.ipynb` -- происходит соединение предсказанной в предыдущем ноутбуке по частям схожести. Для дальнейшего ранжирования.

!!! Надо: сравнить два подхода;
!!! Надо: добавить еще.


Все промежуточные вычисления хранятся в файлах `data/similarity/similarity*.csv`, финальный файл в `data/similarity/final_similarity.tsv`

## 4. Post-анализ результатов

Предварительный анализ, а так же способ вывода для использования в веб-сервисе продемонстрирован в `3_selection.ipynb`.